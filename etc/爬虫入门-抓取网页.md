
[Python爬虫利器二之Beautiful Soup的用法](http://cuiqingcai.com/1319.html)</br>
[BeautifulSoup 提取某个tag标签里面的内容](http://blog.csdn.net/willib/article/details/52246086容)</br></br>
[动态加载页面的解决方案 Selenium](http://www.freebuf.com/news/topnews/97275.html)</br>
[phantomjs.exe](http://phantomjs.org/download.html)</br>

```python
# -*- coding: utf-8 -*-

from selenium import webdriver
from bs4 import BeautifulSoup
import re
import time

#webdriver中的PhantomJS方法可以打开一个我们下载的静默浏览器。
#输入executable_path为phantomjs.exe相对路径
driver =webdriver.PhantomJS(executable_path="../bin/phantomjs.exe")

#使用浏览器请求页面
driver.get("http://finance.sina.com.cn/stock/sl/#industry_1")
#加载1秒，等待所有数据加载完毕
time.sleep(1)
#通过id来定位元素，
#.text获取元素的文本数据
contents = driver.page_source.encode('utf-8','ignore')
soup = BeautifulSoup(contents, 'html.parser', from_encoding="utf-8")
tr_list = soup.find_all("tr")
```


```python
for item in tr_list:
    span_list = item.find_all("span")
    pr_list = []
    for item in span_list:
        pr_list.append(item.string)
    if pr_list: print(pr_list)
```

    ['24.54', '0.41', '1.71%', '10.01%', '38.34', '3.49']
    ['23.75', '0.28', '1.19%', '1.19%', '23.75', '0.28']
    ['17.02', '0.16', '0.97%', '10.01%', '64.08', '5.83']
    ['9.32', '0.08', '0.85%', '9.98%', '19.95', '1.81']
    ['22.99', '0.16', '0.72%', '1.48%', '55.50', '0.81']
    ['13.64', '0.08', '0.59%', '6.15%', '38.86', '2.25']
    ['20.70', '0.12', '0.56%', '0.79%', '28.21', '0.22']
    ['18.95', '0.10', '0.51%', '9.98%', '22.48', '2.04']
    ['14.79', '0.07', '0.49%', '2.75%', '14.60', '0.39']
    ['22.21', '0.11', '0.48%', '3.07%', '22.83', '0.68']
    ['21.53', '0.10', '0.46%', '1.55%', '92.42', '1.41']
    ['32.54', '0.14', '0.42%', '0.74%', '34.05', '0.25']
    ['19.70', '0.08', '0.41%', '5.95%', '59.80', '3.36']
    ['27.23', '0.10', '0.36%', '4.57%', '16.47', '0.72']
    ['6.70', '0.02', '0.30%', '3.63%', '8.28', '0.29']
    ['19.34', '0.05', '0.24%', '10.02%', '15.70', '1.43']
    ['21.95', '0.05', '0.23%', '3.06%', '7.07', '0.21']
    ['23.65', '0.05', '0.22%', '2.69%', '18.70', '0.49']
    ['20.40', '0.04', '0.20%', '5.30%', '4.77', '0.24']
    ['18.56', '0.03', '0.17%', '10.02%', '25.81', '2.35']
    ['16.05', '0.02', '0.15%', '10.00%', '37.39', '3.40']
    ['14.32', '0.02', '0.13%', '2.45%', '25.93', '0.62']
    ['27.95', '0.03', '0.12%', '1.40%', '10.13', '0.14']
    ['38.84', '0.04', '0.11%', '1.65%', '21.54', '0.35']
    ['15.26', '0.01', '0.05%', '10.00%', '37.61', '3.42']
    ['0.00', '0.00', '0.00%', '0.00%', '0.00', '0.00']
    ['14.49', '-0.00', '-0.01%', '0.74%', '16.31', '0.12']
    ['21.26', '-0.01', '-0.03%', '9.98%', '14.76', '1.34']
    ['35.66', '-0.02', '-0.06%', '0.21%', '38.02', '0.08']
    ['15.24', '-0.01', '-0.07%', '1.77%', '12.05', '0.21']
    ['7.49', '-0.01', '-0.09%', '1.32%', '6.12', '0.08']
    ['19.88', '-0.04', '-0.19%', '1.53%', '29.23', '0.44']
    ['16.85', '-0.03', '-0.20%', '1.41%', '20.89', '0.29']
    ['13.14', '-0.03', '-0.20%', '0.47%', '17.04', '0.08']
    ['14.33', '-0.03', '-0.21%', '3.84%', '31.07', '1.15']
    ['6.03', '-0.01', '-0.23%', '0.00%', '23.75', '0.28']
    ['14.86', '-0.04', '-0.26%', '6.44%', '20.65', '1.25']
    ['11.41', '-0.03', '-0.26%', '0.30%', '13.14', '0.04']
    ['11.18', '-0.03', '-0.27%', '4.00%', '12.48', '0.48']
    ['7.35', '-0.02', '-0.27%', '0.52%', '11.63', '0.06']
    ['17.08', '-0.06', '-0.33%', '0.96%', '18.97', '0.18']
    ['12.96', '-0.04', '-0.34%', '0.24%', '8.50', '0.02']
    ['15.95', '-0.05', '-0.34%', '0.67%', '16.46', '0.11']
    ['27.43', '-0.10', '-0.35%', '2.87%', '22.95', '0.64']
    ['9.36', '-0.03', '-0.35%', '0.42%', '9.55', '0.04']
    ['10.64', '-0.04', '-0.36%', '0.32%', '9.48', '0.03']
    ['30.13', '-0.11', '-0.36%', '0.57%', '44.30', '0.25']
    ['15.16', '-0.06', '-0.37%', '1.72%', '11.25', '0.19']
    ['9.22', '-0.04', '-0.43%', '2.23%', '11.48', '0.25']
    ['10.71', '-0.05', '-0.43%', '0.00%', '9.55', '0.04']
    ['13.12', '-0.06', '-0.45%', '0.69%', '24.97', '0.17']
    ['20.98', '-0.10', '-0.46%', '6.42%', '15.08', '0.91']
    ['12.25', '-0.07', '-0.56%', '8.65%', '12.44', '0.99']
    ['13.87', '-0.08', '-0.56%', '1.47%', '8.27', '0.12']
    ['13.33', '-0.07', '-0.56%', '0.00%', '18.97', '0.18']
    ['18.19', '-0.13', '-0.72%', '0.47%', '15.12', '0.07']
    ['7.79', '-0.06', '-0.76%', '0.73%', '13.74', '0.10']
    ['11.23', '-0.14', '-1.24%', '0.50%', '15.97', '0.08']
    ['5.92', '-0.08', '-1.29%', '0.00%', '13.74', '0.10']
    ['14.36', '-0.29', '-2.00%', '0.90%', '13.44', '0.12']
    ['30.75', '-1.16', '-3.63%', '0.00%', '9.48', '0.03']



```python
#关闭浏览器
driver.close()
```

### 如果采用下面获取页面,若数据未加载则会丢失数据
```python
from urllib.request import urlopen as urlopen

url = 'http://finance.sina.com.cn/stock/sl/#industry_1'
contents = urlopen(url).read()
```
